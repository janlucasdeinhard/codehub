install.packages(c("arules", "dplyr", "HMM", "tidyverse"))
install.packages('recipes')
install.packages('mlbench')
library(tidyverse)
library(dplyr)
library(arules)
library(HMM)
library(recipes)
library(mlbench)
library(tidyverse)
library(dplyr)
library(arules)
library(HMM)
library(recipes)
library(mlbench)
Y = read.csv('data/all_stocks.csv',header=TRUE)
Y$dm = rowMeans(Y[c('high','low')])
Y$diff = c(NaN,diff(Y$dm,lag = 1))
Y0 = filter(Y,Name=='AAPL')
getwd()
setwd('TF_root/TF_files/30_R_PROJECTS/StocksModelling/')
library(tidyverse)
library(dplyr)
library(arules)
library(HMM)
library(recipes)
library(mlbench)
Y = read.csv('data/all_stocks.csv',header=TRUE)
Y$dm = rowMeans(Y[c('high','low')])
Y$diff = c(NaN,diff(Y$dm,lag = 1))
Y0 = filter(Y,Name=='AAPL')
plot(Y0$date,Y0$diff)
Y0$diff
discretize(Y0$diff)
Y0$diff
discretize(c(Y0$diff))
Y0$disc <- discretize(Y0$diff)
disc <- discretize(Y0$diff)
predict(Y0$diff,disc)
predict(disc,Y0$diff)
table(predict(disc,Y0$diff))
Y0$binned = predict(disc,Y0$diff)
Y0
disc <- discretize(Y0$diff)
Y0$binned = predict(disc,Y0$diff)
install.packages('caret')
library(caret)
dummyVars(" ~ .",data=Y0$binned,fullRank=T)
dmy <- dummyVars(" ~ .",data=Y0$binned,fullRank=T)
predict(dmy,Y0$binned)
predict(dmy,newdata=Y0$binned)
trsf <- data.frame(predict(dmy, newdata = Y0$binned))
dmy <- dummyVars(" ~ .",data=Y0$binned)
predict(dmy,newdata=Y0$a)
predict(dmy,newdata=Y0$binned)
dmy <- dummyVars(" ~ .",data=Y0)
predict(dmy,newdata=Y0)
dmy <- dummyVars(" ~ .",data=table(Y0$binned))
predict(dmy,newdata=table(Y0$binned))
Y0
as.numeric(Y0$binned)
Y0$binned = as.numeric(Y0$binned)
Y0
library(tidyverse)
library(dplyr)
library(arules)
library(HMM)
library(recipes)
library(mlbench)
library(caret)
Y = read.csv('data/all_stocks.csv',header=TRUE)
Y$dm = rowMeans(Y[c('high','low')])
Y$diff = c(NaN,diff(Y$dm,lag = 1))
Y0 = filter(Y,Name=='AAPL')
disc <- discretize(Y0$diff,cuts=10)
Y0$binned = as.numeric(predict(disc,Y0$diff))
plot(Y0$date,Y0$binned)
disc <- discretize(Y0$diff,cuts=10)
predict(disc,Y0$binned)
Y0$diff.min()
min(Y0$diff)
range(min(Y0$diff),max(Y0$diff))
range(min(Y0$diff),max(Y0$diff),10)
range(min(Y0$diff),1,max(Y0$diff))
range(min(Y0$diff),10,max(Y0$diff))
min(Y0$diff):max(Y0$diff)
seq(min(Y0$diff),max(Y0$diff),length.out=10)
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10))
Y0$binned = as.numeric(predict(disc,Y0$diff))
Y0$binned
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10))
Y0$binned = as.double(predict(disc,Y0$diff))
Y0$binned
disc <- discretize(Y0$diff,cuts=10,labels=c(seq(min(Y0$diff),max(Y0$diff),length.out=10)))
Y0$binned = as.double(predict(disc,Y0$diff))
Y0$binned
disc <- discretize(Y0$diff,cuts=10,labels=c(seq(min(Y0$diff),max(Y0$diff),length.out=10)))
Y0$binned = predict(disc,Y0$diff)
Y0$binned
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10))
Y0$binned = predict(disc,Y0$diff)
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10))
Y0$binned = predict(disc,Y0$diff)
print(Y0$binned)
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10),prefix=NULL)
Y0$binned = predict(disc,Y0$diff)
print(Y0$binned)
Y0$binned
as.numeric(Y0$binned)
as.double(Y0$binned)
plot(Y0$date,Y0$binned)
as.numeric(as.character(Y0$binned))
disc <- discretize(Y0$diff,cuts=10,labels=seq(min(Y0$diff),max(Y0$diff),length.out=10),prefix=NULL)
Y0$binned = as.numeric(as.character(predict(disc,Y0$diff)))
plot(Y0$date,Y0$binned)
as.numeric(as.character(Y0$binned))
Y0$binned
plot(Y0$date,Y0$binned)
points(Y0$date,Y0$diff,type = 'l')
